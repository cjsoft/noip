# 2004 序列操作   
### 时间限制： 5 s&nbsp;&nbsp;&nbsp;&nbsp;空间限制： 256000 KB&nbsp;&nbsp;&nbsp;&nbsp;题目等级： 大师  
## 题目描述：  

<pre>
　　有一个长度为n的序列，有三个操作1.I a b c表示将[a,b]这一段区间的元素集体增加c，2.R a b表示将[a,b]区间内所有元素变成相反数，3.Q a b c表示询问[a,b]这一段区间中选择c个数相乘的所有方案的和mod 19940417的值。
</pre>
  
  
## 输入描述：  

<pre>
　　第一行两个数n，q表示序列长度和操作个数。  
　　第二行n个非负整数，表示序列。  
　　接下来q行每行输入一个操作I a b c或者 R a b或者Q a b c意义如题目描述。
</pre>
  
  
## 输出描述：  

<pre>
　　对于每个询问，输出选出c个数相乘的所有方案的和mod19940417的值。
</pre>
  
  
## 样例输入：  

<pre>
5 5  
1 2 3 4 5  
I 2 3 1  
Q 2 4 2  
R 1 5  
I 1 3 -1  
Q 1 5 1
</pre>
  
  
## 样例输出：  

<pre>
40  
19940397
</pre>
  
  
## 数据范围及提示：  

<pre>
　　做完第一个操作序列变为1 3 4 4 5。  
　　第一次询问结果为3*4+3*4+4*4=40。  
　　做完R操作变成-1 -3 -4 -4 -5。  
　　做完I操作变为-2 -4 -5 -4 -5。  
　　第二次询问结果为-2-4-5-4-5=-20。
  

　　10%的数据n<=10,q<=10。  
　　另30%的数据没有I和R操作。  
　　另30%的数据没有I操作。  
　　100%的数据n<=50000,q<=50000,初始序列的元素的绝对值<=109，I a b c中保证[a,b]是一个合法区间，|c|<=109，R a b保证[a,b]是个合法的区间。Q a b c中保证[a,b]是个合法的区间1<=c<=min(b-a+1,20)。
  

来源：中国国家队清华集训 2012-2013 第三天
</pre>
  
  
***  

##### AC: 19  
##### WA: 34  
##### TLE: 4  
##### MLE: 0  
##### RE: 2  
