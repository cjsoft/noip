# 1954 线段树   
### 时间限制： 2 s&nbsp;&nbsp;&nbsp;&nbsp;空间限制： 64000 KB&nbsp;&nbsp;&nbsp;&nbsp;题目等级： 大师  
## 题目描述：  

<pre>
线段树是一种OI中喜闻乐见的数据结构。它维护一个序列a1，a2，a3，……，an，其中每个元素都为不小于0的整数，它支持以下操作：
1.修改元素值：给定x，y，修改ax的值为y；
2.查询元素值：给定x，输出ax的值；
3.区间增减：给定l，r，x，将从al到ar（含al和ar），即区间[l，r]中的每个值都加上x（x可以为负数）；
4.区间求和：给定l，r，输出从al到ar（含al和ar），即区间[l，r]中的每个元素之和。
下面请你编程，实现线段树的功能。
 
（请注意本题的数据范围和空间限制，切记切记）
</pre>
  
  
## 输入描述：  

<pre>
第一行为三个整数s，q和n，其中s代表此测试点的序号（从1到50，具体见【数据说明】），q代表操作的数量，n代表序列的长度。初始时，序列中每个元素都为0。
接下来q行，每行代表一个操作，第一个数字为操作代号，意义在上面已经给出了。
如果操作为1（修改元素值），则这一行接下来有两个整数x，y；如果操作为2（查询元素值），则这一行接下来有一个整数x；如果操作为3（区间增减），则这一行接下来有三个整数l，r，x；如果操作为4（区间求和），则这一行接下来有两个整数l，r。
输入保证操作的合法性，即不会出现l>r的情况，也不会出现操作之后元素值出现负数的情况。
</pre>
  
  
## 输出描述：  

<pre>
输出文件共q行。对于每次询问，需要输出一个返回值，每个占一行。
如果当前操作为不需要返回值的操作（1修改元素值，3区间增减），则输出一行-1；否则，输出对应操作的返回值。即对于操作2，输出所询问的元素值；对于操作4，输出区间所有元素之和。
</pre>
  
  
## 样例输入：  

<pre>
1 10 4
2 3
1 2 3
2 3
2 2
3 1 3 2
2 3
2 2
2 1
4 2 4
2 4
</pre>
  
  
## 样例输出：  

<pre>
0
-1
0
3
-1
2
5
2
7
0
</pre>
  
  
## 数据范围及提示：  

<pre>
【输入输出样例说明】
a为一个长度为4的序列，初始为{0，0，0，0}。
首先询问第3个元素的值，返回0；
然后将第2个元素的值改为3，序列变为{0，3，0，0}，返回-1；
分别询问第3个和第2个元素的值，依次返回0和3；
将区间[1，3]内元素都增加2，序列变为{2，5，2，0}，返回-1；
分别询问第3，2，1个元素的值，依次返回2，5，2；
询问区间[2，4]的元素和，返回5+2+0=7；
询问第4个元素的值，返回0。
 
【数据说明】
 




测试点序号（s）


数据范围


其他特征




1,2,3,4,5


q=n=63,127,
255,511,1023
0≤ai≤2×10^9


涉及了全部的4种操作；




6,7,8,9,10


q=1023,4095,
16383,131071,
1048575
n=2^4096-1≈10^1233
0≤ai≤2^4096-1


所涉及的操作只有：
2查询元素值，4区间求和；




11,12,13,14,15


q=63,127,
255,511,1023
n=4294967295
0≤ai≤1073741823


涉及了全部的4种操作；
所有修改及查询的元素下标
均在[1，n-1]以内；
所有修改及查询的区间
都是[1，n-1]的子区间；




16,17,18,19,20


q=1023,4095,
16383,131071,
1048575
n=1.44×10^7
0≤ai≤3.6×10^9


所涉及的操作有且只有：
1修改元素值，2查询元素值；




21,22,23,24,25


q=n=1023,4095,
16383,131071,
1048575
0≤ai≤7.2×10^18


所涉及的操作有且只有：
1修改元素值，
2查询元素值，3区间增减；
所有的修改操作进行完之后，
才会有区间增减操作；
所有的区间增减操作进行完之后，
才会有查询操作；




26,27,28,29,30


q=n=1023,4095,
16383,131071,
1048575
0≤ai≤1.44×10^13


所涉及的操作有且只有：
1修改元素值，
2查询元素值，4区间求和；
所有的修改操作进行完之后，
才会有查询以及区间求和操作；




31,32,33,34,35


q=n=1023,4095,
16383,131071,
1048575
0≤ai≤1.44×10^13


涉及了全部的4种操作；
所有的修改操作进行完之后，
才会有区间增减操作；
所有的区间增减操作进行完之后，
才会有查询以及区间求和操作；




36,37,38,39,40


q=n=2047,
4095,8191,
32767,131071
0≤ai≤1.44×10^14


所涉及的操作有且只有：
1修改元素值，
2查询元素值，4区间求和；




41,42,43,44,45


q=n=2047,
4095,8191,
32767,131071
0≤ai≤3.6×10^18


所涉及的操作有且只有：
1修改元素值，
2查询元素值，3区间增减；




46,47,48,49,50


q=2047,
4095,8191,
32767,131071
n=2^128≈3.4×10^38
0≤ai≤2^128-1


所涉及的操作有且只有：
1修改元素值，2查询元素值；




  

</pre>
  
  
***  

##### AC: 1  
##### WA: 63  
##### TLE: 17  
##### MLE: 8  
##### RE: 111  
